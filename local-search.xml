<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ä½¿ç”¨Flinkä¹‹åˆ†æå¾®åšåƒåœ¾è´¦å·çš„è¡Œä¸º</title>
    <link href="/2021/11/28/flink-weibo/"/>
    <url>/2021/11/28/flink-weibo/</url>
    
    <content type="html"><![CDATA[<p>æœ¬é¡¹ç›®é’ˆå¯¹MicroblogPCUæ•°æ®é›†è¿›è¡Œåˆ†æï¼Œé‡‡ç”¨Pythonä¸ºç¼–ç¨‹è¯­è¨€ï¼Œé‡‡ç”¨mysqlå­˜å‚¨æ•°æ®ï¼Œé‡‡ç”¨flinkå¯¹æ•°æ®è¿›è¡Œå¤„ç†åˆ†æï¼Œå¹¶å¯¹ç»“æœè¿›è¡Œæ•°æ®å¯è§†åŒ–ã€‚</p><p> Flink æ˜¯ç›®å‰éå¸¸ç«çƒ­çš„æµå¤„ç†æ¡†æ¶ï¼Œå¯ä»¥å¾ˆå¥½åœ°å®ç°æ‰¹æµä¸€ä½“ï¼Œå³ä¸€å¥—ä»£ç æ—¢å¯ä»¥ç”¨äºæ‰¹å¤„ç†ï¼Œä¹Ÿå¯ä»¥ç”¨äºæµå¤„ç†ã€‚ Flink åœ¨åšæ‰¹å¤„ç†çš„æ—¶å€™ï¼Œæ˜¯å°†æ‰¹æ•°æ®å½“æˆç‰¹æ®Šçš„æµæ•°æ®æ¥å¤„ç†ã€‚PyFlink æ˜¯ Flink å¯¹ Java API çš„ä¸€å±‚å°è£…ï¼Œè¿è¡Œæ—¶ä¼šå¯åŠ¨ JVM æ¥ä¸ Python è¿›è¡Œé€šä¿¡ã€‚<br> PyFlink æä¾›äº†å¤šç§ä¸åŒå±‚çº§çš„ APIï¼Œå±‚çº§è¶Šé«˜å°è£…ç¨‹åº¦è¶Šé«˜ï¼Œå±‚çº§ç”±é«˜åˆ°ä½åˆ†åˆ«ä¸º:SQL APIã€Table APIã€DataStream API / DataSet APIã€Stateful Streaming Processingï¼Œ</p><p>æœ¬å®éªŒåœ¨Table API çš„åŸºç¡€ä¸Šè¿›è¡Œç¼–ç¨‹ã€‚</p><h2 id="å®éªŒç¯å¢ƒæ­å»º"><a href="#å®éªŒç¯å¢ƒæ­å»º" class="headerlink" title="å®éªŒç¯å¢ƒæ­å»º"></a>å®éªŒç¯å¢ƒæ­å»º</h2><ul><li>ç³»ç»Ÿ: macos Big Sur 11.2.2</li><li> Java : 11.0.10</li><li>Python : 3.9.2 | packaged by conda-forge</li><li>Flink : 1.12.2</li></ul><p>é€šè¿‡homebrewåœ¨æœ¬æœºå®‰è£…apache-flinkä¹‹åï¼Œè¿è¡Œæ–‡ä»¶å¤¹ä¸‹çš„start-cluster.shå¯åŠ¨flinké›†ç¾¤æ¨¡å¼ï¼ˆä¹‹åé€šè¿‡ä¿®æ”¹ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œç”¨å‘½ä»¤<code>start-flink</code>æ¥æ›¿ä»£è¿™ä¸€æ­¥ï¼‰</p><p>ç”¨<code>flink run -m localhost:8081 -py weibo.py</code>è¿è¡Œpythonç¨‹åºï¼Œå¹¶é€šè¿‡<code>localhost:8081</code>åœ¨webé¡µé¢æ‰“å¼€flinkçš„dashboardï¼ŒæŸ¥çœ‹ä½œä¸šçš„è¿è¡Œæƒ…å†µã€‚</p><p>![image-20210607203836096](/Users/liushupin/Library/Application Support/typora-user-images/image-20210607203836096.png)</p><h2 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h2><p>MicroblogPCUæ˜¯ä»æ–°æµªå¾®åšé‡‡é›†åˆ°çš„ä¸€ä¸ªç”¨äºæ¢ç´¢å¾®åšä¸­çš„spammersï¼ˆå‘é€åƒåœ¾ä¿¡æ¯çš„äººï¼‰çš„æ•°æ®é›†ï¼Œå®ƒå¯ä»¥è¢«ç”¨äºç ”ç©¶æœºå™¨å­¦ä¹ æ–¹æ³•å’Œç¤¾ä¼šå…³ç³»ç ”ç©¶ã€‚æœ¬æ–‡å°†åˆ©ç”¨è¿™ä¸ªæ•°æ®é›†æ¢ç©¶spammerçš„ä¸€äº›è¡Œä¸ºç‰¹å¾ï¼Œå¹¶åˆ†æå®ƒä»¬å’Œæ­£å¸¸ç¤¾äº¤è´¦å·çš„è¡Œä¸ºåŒºåˆ«ã€‚</p><h2 id="æ•°æ®é¢„å¤„ç†"><a href="#æ•°æ®é¢„å¤„ç†" class="headerlink" title="æ•°æ®é¢„å¤„ç†"></a>æ•°æ®é¢„å¤„ç†</h2><p>æœ¬æ¬¡å®éªŒé‡‡ç”¨pandasåº“å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œè¯»å–csvæ–‡ä»¶ååˆ°Dataframeåï¼Œæ¸…æ´—å„ä¸ªå±æ€§å’Œå¤„ç†ç¼ºå¤±å€¼ï¼Œå–å‡ºå¾®åšç”¨æˆ·çš„å¾®åšæ–‡æœ¬å†…å®¹ã€å‘åšæ—¶é—´ï¼Œç²‰ä¸æ•°ã€å…³æ³¨äººæ•°ã€å‘åšæ•°ã€ç­‰çº§è¿™äº›å±æ€§è¿›è¡Œå¤„ç†åˆ†æã€‚ </p><h4 id="æ–‡ä»¶ç¼–ç è½¬åŒ–"><a href="#æ–‡ä»¶ç¼–ç è½¬åŒ–" class="headerlink" title="æ–‡ä»¶ç¼–ç è½¬åŒ–"></a>æ–‡ä»¶ç¼–ç è½¬åŒ–</h4><p>ç›´æ¥è¯»å–å‘ç°ä¹±ç ï¼Œç”¨macOSè‡ªå¸¦çš„iconvå‘½ä»¤è¡Œå·¥å…·å°†gb2312ç¼–ç çš„æ•°æ®æºæ–‡ä»¶è½¬ä¸ºutf-8ç¼–ç  <code> iconv -c -f gb2312 -t UTF-8 file &gt;&gt; new_file</code></p><h4 id="æŸ¥çœ‹csvæ•°æ®"><a href="#æŸ¥çœ‹csvæ•°æ®" class="headerlink" title="æŸ¥çœ‹csvæ•°æ®"></a>æŸ¥çœ‹csvæ•°æ®</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">file_path=<span class="hljs-string">&#x27;weibo_user.csv&#x27;</span><br>df = pd.read_csv(file_path,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>df.head()<br></code></pre></td></tr></table></figure><h4 id="æ¸…æ´—ç”¨æˆ·messageçš„æ–‡æœ¬å†…å®¹"><a href="#æ¸…æ´—ç”¨æˆ·messageçš„æ–‡æœ¬å†…å®¹" class="headerlink" title="æ¸…æ´—ç”¨æˆ·messageçš„æ–‡æœ¬å†…å®¹"></a>æ¸…æ´—ç”¨æˆ·messageçš„æ–‡æœ¬å†…å®¹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_msg</span>(<span class="hljs-params">text</span>):</span><br>    text = re.sub(<span class="hljs-string">r&quot;(å›å¤)?(//)?\s*@\S*?\s*(:| |$)&quot;</span>, <span class="hljs-string">&quot; &quot;</span>, text)  <span class="hljs-comment"># å»é™¤æ­£æ–‡ä¸­çš„@å’Œå›å¤/è½¬å‘ä¸­çš„ç”¨æˆ·å</span><br>    text = re.sub(<span class="hljs-string">r&quot;\[\S+\]&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, text)      <span class="hljs-comment"># å»é™¤è¡¨æƒ…ç¬¦å·</span><br>    <span class="hljs-comment">#text = re.sub(r&quot;#\S+#&quot;, &quot;&quot;, text)       # ä¿ç•™è¯é¢˜å†…å®¹</span><br>    URL_REGEX = re.<span class="hljs-built_in">compile</span>(<br>        <span class="hljs-string">r&#x27;(?i)\b((?:https?://|www\d&#123;0,3&#125;[.]|[a-z.\-]+[.][a-z]&#123;2,4&#125;/)(?:[^\s()&lt;&gt;]+|\(([^\s()&lt;&gt;]+|(\([^\s()&lt;&gt;]+\)))*\))+(?:\(([^\s()&lt;&gt;]+|(\([^\s()&lt;&gt;]+\)))*\)|[^\s`!()\[\]&#123;&#125;;:\&#x27;&quot;.,&lt;&gt;?Â«Â»â€œâ€â€˜â€™]))&#x27;</span>,<br>        re.IGNORECASE)  <span class="hljs-comment"># ä¸ä¿ç•™æ•°å­—</span><br>    text = re.sub(URL_REGEX, <span class="hljs-string">&quot;&quot;</span>, text)       <span class="hljs-comment"># å»é™¤ç½‘å€</span><br>    text = re.sub(<span class="hljs-string">r&quot;\s+&quot;</span>, <span class="hljs-string">&quot; &quot;</span>, text)  <span class="hljs-comment"># åˆå¹¶æ­£æ–‡ä¸­è¿‡å¤šçš„ç©ºæ ¼</span><br>    <span class="hljs-keyword">return</span> text.strip()<br></code></pre></td></tr></table></figure><h4 id="æ—¶é—´æ ¼å¼æ¸…æ´—"><a href="#æ—¶é—´æ ¼å¼æ¸…æ´—" class="headerlink" title="æ—¶é—´æ ¼å¼æ¸…æ´—"></a>æ—¶é—´æ ¼å¼æ¸…æ´—</h4><p>ä¸ºäº†å¯¹spammerå‘åšæ—¥æœŸå’Œæ—¶é—´åˆ†åˆ«åšç ”ç©¶ï¼ŒæŠŠå­—ç¬¦ä¸²ä¸­çš„æ—¥æœŸå’Œæ—¶é—´å•ç‹¬æå–å‡ºæ¥ï¼Œå¹¶ç”Ÿæˆdatetimeç±»å‹ï¼›</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">str_to_date_wb</span>(<span class="hljs-params">date_str</span>):</span><br>    date = date_str.split(<span class="hljs-string">&#x27; &#x27;</span>)[<span class="hljs-number">0</span>]<br>    fmt = <span class="hljs-string">&#x27;%Y/%m/%d&#x27;</span><br>    time_tuple = time.strptime(date, fmt)<br>    year, month, day = time_tuple[:<span class="hljs-number">3</span>]<br>    <span class="hljs-keyword">return</span> datetime.date(year, month, day)<br><br>df[<span class="hljs-string">&#x27;date&#x27;</span>]=df[<span class="hljs-string">&#x27;post_time&#x27;</span>].<span class="hljs-built_in">map</span>(str_to_date_wb)<br></code></pre></td></tr></table></figure><h3 id="ç¼ºå¤±å€¼å¤„ç†"><a href="#ç¼ºå¤±å€¼å¤„ç†" class="headerlink" title="ç¼ºå¤±å€¼å¤„ç†"></a>ç¼ºå¤±å€¼å¤„ç†</h3><ol><li>æŸ¥çœ‹æ•°æ®æ˜¯å¦å…·æœ‰é‡å¤å€¼</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df.loc[df.followee_num.isnull(),<span class="hljs-string">&#x27;followee_num&#x27;</span>]<br></code></pre></td></tr></table></figure><ol start="2"><li>æŸ¥çœ‹å„å­—æ®µç¼ºå¤±ç‡ï¼Œç¼ºå¤±çš„ä½ç½®ç”¨è‡ªå®šä¹‰çš„å€¼å¡«å……</li></ol><ul><li>ä¾‹å¦‚ï¼Œæ—¶é—´ç¼ºå¤±å€¼çš„å¤„ç†ï¼šå…¨éƒ¨è®¾ç½®ä¸º1990/1/1 00:00</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df.loc[df[<span class="hljs-string">&#x27;post_time&#x27;</span>].isnull(),<span class="hljs-string">&#x27;post_time&#x27;</span>]=<span class="hljs-string">&#x27;1990/1/1 00:00&#x27;</span><br></code></pre></td></tr></table></figure><ul><li>æ ‡ç­¾1è¡¨ç¤ºæ˜¯spammerï¼Œ-1è¡¨ç¤ºä¸æ˜¯spammerï¼ŒNANæ•°æ®ç”¨0å¡«å……ã€‚</li></ul><ol start="3"><li><p>é€‰å–è¦ç ”ç©¶çš„å±æ€§ï¼Œåˆ é™¤ä¸ç ”ç©¶çš„å±æ€§ï¼Œä¿å­˜åˆ°å½“å‰è·¯å¾„ä¸‹çš„csvæ–‡ä»¶ä¸­ï¼Œå‘½åä¸ºâ€œwashnew.csvâ€ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">cols = [<span class="hljs-string">&#x27;user_id&#x27;</span>,<span class="hljs-string">&#x27;gender&#x27;</span>,<span class="hljs-string">&#x27;post_num&#x27;</span>,<span class="hljs-string">&#x27;message&#x27;</span>,<span class="hljs-string">&#x27;follower_num&#x27;</span>,<span class="hljs-string">&#x27;followee_num&#x27;</span>,<span class="hljs-string">&#x27;is_spammer&#x27;</span>]<br>df[cols].to_csv(<span class="hljs-string">&#x27;washednew.csv&#x27;</span>,header=<span class="hljs-literal">None</span>) <br></code></pre></td></tr></table></figure></li></ol><h2 id="PyFlinkæ‰¹å¤„ç†"><a href="#PyFlinkæ‰¹å¤„ç†" class="headerlink" title="PyFlinkæ‰¹å¤„ç†"></a>PyFlinkæ‰¹å¤„ç†</h2><ul><li><p>é¦–å…ˆï¼Œåˆ›å»º Blink æ‰¹å¤„ç†ç¯å¢ƒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pyflink.table <span class="hljs-keyword">import</span> BatchTableEnvironment, EnvironmentSettings<br><span class="hljs-keyword">from</span> pyflink.table <span class="hljs-keyword">import</span> DataTypes<br><span class="hljs-keyword">from</span> pyflink.table.descriptors <span class="hljs-keyword">import</span> Schema, OldCsv, FileSystem<br><br>env_settings = EnvironmentSettings.new_instance().in_batch_mode().use_blink_planner().build()<br>t_env = BatchTableEnvironment.create(environment_settings=env_settings)<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºæºè¡¨(source)ï¼Œsource æŒ‡æ•°æ®æºï¼Œè¿™é‡Œä½¿ç”¨åŒçº§ç›®å½•ä¸‹ weibo_user.csvæ¸…æ´—åçš„washednew.csv</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">dir_word = os.path.join(os.path.abspath(os.path.dirname(__file__)), <span class="hljs-string">&#x27;washednew.csv&#x27;</span>)<br></code></pre></td></tr></table></figure></li><li><p>é€šè¿‡Table API åˆ›å»ºä¸€å¼ è¡¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">t_env.connect(FileSystem().path(dir_word)) \<br>    .with_format(OldCsv() \<br>                 .field(<span class="hljs-string">&#x27;id&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;user_id&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;gender&#x27;</span>, DataTypes.STRING()) \<br>                 .field(<span class="hljs-string">&#x27;post_num&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;follower_num&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;followee_num&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;is_spammer&#x27;</span>, DataTypes.FLOAT())) \<br>    .with_schema(Schema() \<br>                 .field(<span class="hljs-string">&#x27;id&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;user_id&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;gender&#x27;</span>, DataTypes.STRING()) \<br>                 .field(<span class="hljs-string">&#x27;post_num&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;follower_num&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;followee_num&#x27;</span>, DataTypes.BIGINT()) \<br>                 .field(<span class="hljs-string">&#x27;is_spammer&#x27;</span>, DataTypes.FLOAT())) \<br>    .create_temporary_table(<span class="hljs-string">&#x27;source&#x27;</span>)<br></code></pre></td></tr></table></figure></li></ul><h2 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h2><h4 id="æ­£å¸¸ç”¨æˆ·å’Œspammerçš„ç²‰ä¸é‡çº§æ¯”è¾ƒ"><a href="#æ­£å¸¸ç”¨æˆ·å’Œspammerçš„ç²‰ä¸é‡çº§æ¯”è¾ƒ" class="headerlink" title="æ­£å¸¸ç”¨æˆ·å’Œspammerçš„ç²‰ä¸é‡çº§æ¯”è¾ƒ"></a>æ­£å¸¸ç”¨æˆ·å’Œspammerçš„ç²‰ä¸é‡çº§æ¯”è¾ƒ</h4><p>ç”¨Table APIä»è¡¨ä¸­å–å‡ºæ•°æ®ã€‚</p><p>ä»¥é€‰æ‹©featureä¸ºâ€œfollowee_numâ€ä¸ºä¾‹ï¼Œä¸ºäº†å°†ç²‰ä¸æ•°åˆ’åˆ†ä¸ºâ€™ç™¾â€™,â€™åƒâ€™,â€™ä¸‡â€™,â€™åä¸‡â€™,â€™ç™¾ä¸‡â€™,â€™åƒä¸‡â€™çš„æ•°é‡çº§ï¼Œæ¯æ¬¡ç”¨æ¡ä»¶é€‰æ‹©å’Œâ€countâ€ä»è¡¨ä¸­å–å‡ºç¬¦åˆèŒƒå›´çš„æ•°æ®ï¼Œå¹¶åˆ©ç”¨group_byæ–¹æ³•åŒºåˆ†spammerå’Œæ­£å¸¸ç”¨æˆ·çš„ä¸¤è€…æ•°æ®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">z1 = tb.where(col(feature)&lt;<span class="hljs-number">1000</span> ) \<br>         .group_by(col(<span class="hljs-string">&#x27;is_spammer&#x27;</span>)) \<br>         .select(<span class="hljs-string">&#x27;count(1) AS cnt&#x27;</span>).to_pandas() <br></code></pre></td></tr></table></figure><p>å¯è§†åŒ–æ¯”è¾ƒæ­£å¸¸ç”¨æˆ·å’Œspammerçš„ç²‰ä¸é‡çº§ï¼Œå¹¶è¾“å‡ºå›¾åƒåˆ°pngæ–‡ä»¶ã€‚</p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ­£å¸¸ç”¨æˆ·çš„ç²‰ä¸æ•°é‡ä»ç™¾çº§åˆ°åƒä¸‡çº§ä¸ç­‰ï¼Œå¹¶ä¸”åƒçº§ä»¥ä¸Šçš„éƒ¨åˆ†åˆ†å¸ƒç›¸å¯¹å‡åŒ€ï¼Œè€Œspammerç”¨æˆ·çš„ç²‰ä¸é‡å‡åœ¨1000ä»¥ä¸‹ï¼Œè¯´æ˜spammerç”¨æˆ·æ˜¯å¾ˆéš¾ç§¯ç´¯ç²‰ä¸é‡çš„ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">z = pd.concat([z1,z2,z3,z4,z5,z6],axis=<span class="hljs-number">1</span>,ignore_index=<span class="hljs-keyword">True</span>)<br>z.<span class="hljs-keyword">columns</span>=[<span class="hljs-string">&#x27;ç™¾&#x27;</span>,<span class="hljs-string">&#x27;åƒ&#x27;</span>,<span class="hljs-string">&#x27;ä¸‡&#x27;</span>,<span class="hljs-string">&#x27;åä¸‡&#x27;</span>,<span class="hljs-string">&#x27;ç™¾ä¸‡&#x27;</span>,<span class="hljs-string">&#x27;åƒä¸‡&#x27;</span>]<br>z.<span class="hljs-keyword">index</span>=[<span class="hljs-string">&#x27;normal&#x27;</span>,<span class="hljs-string">&#x27;spammer&#x27;</span>]<br><br>z.plot(kind=<span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-keyword">stacked</span>=<span class="hljs-keyword">True</span>, alpha= <span class="hljs-number">0.7</span>)<br>plt.legend()<br>plt.title(<span class="hljs-string">&#x27;æ­£å¸¸ç”¨æˆ·å’Œspammerçš„ç²‰ä¸é‡çº§æ¯”è¾ƒ&#x27;</span>)<br>plt.savefig(feature+<span class="hljs-string">&#x27;.png&#x27;</span>)<br></code></pre></td></tr></table></figure><img src="image-20210610205912269.png" alt="image-20210610205912269" style="zoom: 50%;" /><h4 id="æ­£å¸¸ç”¨æˆ·å’Œspammerç”¨æˆ·çš„å…³æ³¨äººæ•°æ¯”è¾ƒ"><a href="#æ­£å¸¸ç”¨æˆ·å’Œspammerç”¨æˆ·çš„å…³æ³¨äººæ•°æ¯”è¾ƒ" class="headerlink" title="æ­£å¸¸ç”¨æˆ·å’Œspammerç”¨æˆ·çš„å…³æ³¨äººæ•°æ¯”è¾ƒ"></a>æ­£å¸¸ç”¨æˆ·å’Œspammerç”¨æˆ·çš„å…³æ³¨äººæ•°æ¯”è¾ƒ</h4><p>å…³æ³¨äººæ•°æŒ‡è¯¥å‘æ–‡è´¦æˆ·å…³æ³¨å…¶ä»–äººçš„æ•°é‡ã€‚é¦–å…ˆæŸ¥çœ‹æ•°æ®å¤§è‡´æƒ…å†µï¼Œå‘ç°æ ·æœ¬ä¸­çš„å…³æ³¨äººæ•°ä»¥â€œ0ï½100â€ã€â€œ100ï½1000â€ä»¥åŠâ€œ&gt;1000â€åˆ’åˆ†æ˜¯æ¯”è¾ƒå¥½çš„ã€‚ä¸ºäº†ç›´è§‚æ˜¾ç¤ºå„äººæ•°æ®µçš„æ¯”ä¾‹ï¼Œé‡‡ç”¨é¥¼å›¾æ¥ç»˜åˆ¶æˆ‘ä»¬çš„æ•°æ®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python">fig,axes=plt.subplots(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)<span class="hljs-comment">#åˆ›å»ºç”»å¸ƒ</span><br><br>labels= z.columns<br>sizes_m=z.loc[[<span class="hljs-string">&#x27;normal&#x27;</span>]].values.squeeze() <span class="hljs-comment">#normalå¯¹åº”çš„æ•°å€¼</span><br>sizes_f=z.loc[[<span class="hljs-string">&#x27;spammer&#x27;</span>]].values.squeeze()  <span class="hljs-comment">#spammerå¯¹åº”çš„æ•°å€¼</span><br>colors=[<span class="hljs-string">&#x27;green&#x27;</span>,<span class="hljs-string">&#x27;yellow&#x27;</span>,<span class="hljs-string">&#x27;orange&#x27;</span>]<span class="hljs-comment">#æ¯å—å¯¹åº”çš„é¢œè‰²</span><br>explode=(<span class="hljs-number">0.05</span>,<span class="hljs-number">0.05</span>,<span class="hljs-number">0.05</span>)<span class="hljs-comment">#å°†æ¯ä¸€å—åˆ†å‰²å‡ºæ¥ï¼Œå€¼è¶Šå¤§åˆ†å‰²å‡ºçš„é—´éš™è¶Šå¤§</span><br><br>axes[<span class="hljs-number">0</span>].pie(sizes_m,<br>        colors=colors,<br>        labels=labels,<br>        explode=explode,<br>        autopct=<span class="hljs-string">&#x27;%.2f%%&#x27;</span>,<span class="hljs-comment">#æ•°å€¼è®¾ç½®ä¸ºä¿ç•™å›ºå®šå°æ•°ä½çš„ç™¾åˆ†æ•°</span><br>        shadow=<span class="hljs-literal">False</span>,<span class="hljs-comment">#æ— é˜´å½±è®¾ç½®</span><br>        startangle=<span class="hljs-number">90</span>,<span class="hljs-comment">#é€†æ—¶é’ˆèµ·å§‹è§’åº¦è®¾ç½®</span><br>        pctdistance=<span class="hljs-number">0.5</span>,<span class="hljs-comment">#æ•°å€¼è·åœ†å¿ƒåŠå¾„èƒŒä¹¦è·ç¦»</span><br>        labeldistance =<span class="hljs-number">1.05</span><span class="hljs-comment">#å›¾ä¾‹è·åœ†å¿ƒåŠå¾„å€è·ç¦»</span><br>       )<br>axes[<span class="hljs-number">0</span>].axis(<span class="hljs-string">&#x27;equal&#x27;</span>)<span class="hljs-comment">#x,yè½´åˆ»åº¦ä¸€è‡´ï¼Œä¿è¯é¥¼å›¾ä¸ºåœ†å½¢</span><br>axes[<span class="hljs-number">0</span>].legend(loc=<span class="hljs-string">&#x27;best&#x27;</span>)<br>axes[<span class="hljs-number">0</span>].set_title(<span class="hljs-string">&#x27;æ­£å¸¸ç”¨æˆ·å…³æ³¨æ•°é¥¼å›¾&#x27;</span>)<br><br>axes[<span class="hljs-number">1</span>].pie(sizes_f,<br>        colors=colors,<br>        labels=labels,<br>        explode=explode,<br>        autopct=<span class="hljs-string">&#x27;%.2f%%&#x27;</span>,<br>        shadow=<span class="hljs-literal">False</span>,<br>        startangle=<span class="hljs-number">90</span>,<br>        pctdistance=<span class="hljs-number">0.5</span>,<br>        labeldistance =<span class="hljs-number">1.05</span><br>       )<br>axes[<span class="hljs-number">1</span>].axis(<span class="hljs-string">&#x27;equal&#x27;</span>)<br>axes[<span class="hljs-number">1</span>].set_title(<span class="hljs-string">&#x27;spammerç”¨æˆ·å…³æ³¨æ•°é¥¼å›¾&#x27;</span>)<br>axes[<span class="hljs-number">1</span>].legend(loc=<span class="hljs-string">&#x27;best&#x27;</span>)<br><br>fig.savefig(<span class="hljs-string">&#x27;followee_num.jpg&#x27;</span>,dpi=<span class="hljs-number">200</span>)<br></code></pre></td></tr></table></figure><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºæ­£å¸¸ç”¨æˆ·çš„å…³æ³¨æ•°å¤§å¤šé›†ä¸­åœ¨100ï½1000ï¼Œä¹Ÿå°±æ˜¯å‡ ç™¾äººçš„å…³æ³¨é‡ï¼Œçº¦1/4å…³æ³¨äººæ•°åœ¨100äººä»¥å†…ï¼Œå°éƒ¨åˆ†è¶…è¿‡äº†1000äººï¼›è€Œspammerè´¦æˆ·æœ‰å‡ ä¹ä¸€åŠçš„æ¯”ä¾‹å…³æ³¨äººæ•°åœ¨1000ä»¥ä¸Šï¼Œ100ï½1000çš„éƒ¨åˆ†çš„æ•°é‡ä¹Ÿè¾¾åˆ°äº†47.79%ï¼Œæå°‘æ•°å…³æ³¨äººæ•°åœ¨100äººä»¥å†…ã€‚è¯´æ˜spammerè´¦æˆ·å€¾å‘äºé€šè¿‡å¤§é‡å…³æ³¨å…¶ä»–å¾®åšæ¥å®Œæˆä¼ æ’­åƒåœ¾ä¿¡æ¯çš„ç›®çš„ã€‚</p><img src="followee_num.jpg" alt="followee_num" style="zoom:80%;" /><h3 id="ç”Ÿæˆè¯äº‘å›¾"><a href="#ç”Ÿæˆè¯äº‘å›¾" class="headerlink" title="ç”Ÿæˆè¯äº‘å›¾"></a>ç”Ÿæˆè¯äº‘å›¾</h3><blockquote><p> è¯äº‘å›¾æ˜¯ä¸€ç§ç”¨æ¥å±•ç°é«˜é¢‘å…³é”®è¯çš„å¯è§†åŒ–è¡¨è¾¾ï¼Œé€šè¿‡æ–‡å­—ã€è‰²å½©ã€å›¾å½¢çš„æ­é…ï¼Œäº§ç”Ÿæœ‰å†²å‡»åŠ›åœ°è§†è§‰æ•ˆæœï¼Œè€Œä¸”èƒ½å¤Ÿä¼ è¾¾æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚è¯äº‘å°±æ˜¯é€šè¿‡å½¢æˆâ€œå…³é”®è¯äº‘å±‚â€æˆ–â€œå…³é”®è¯æ¸²æŸ“â€ï¼Œå¯¹ç½‘ç»œæ–‡æœ¬ä¸­å‡ºç°é¢‘ç‡è¾ƒé«˜çš„â€œå…³é”®è¯â€çš„è§†è§‰ä¸Šçš„çªå‡ºã€‚</p></blockquote><p>æœ¬å®éªŒç”¨è¯äº‘å›¾æ¥å¤„ç†spammerä¸ªäººä¸»é¡µçš„â€œmessageâ€ï¼Œä»è€Œç›´è§‚åœ°å±•ç¤ºspammerè´¦æˆ·æ¶‰åŠåˆ°çš„é«˜é¢‘å…³äº›è¯ï¼Œè¿™äº›å…³é”®è¯èƒ½å¤Ÿä½“ç°spammerè´¦æˆ·å…³æ³¨çš„è¯é¢˜é¢†åŸŸä»¥åŠä¼ æ’­åƒåœ¾ä¿¡æ¯çš„ç›®çš„ã€‚</p><h4 id="å®‰è£…ç›¸åº”çš„åº“åŒ…å’Œpythonæ¨¡å—"><a href="#å®‰è£…ç›¸åº”çš„åº“åŒ…å’Œpythonæ¨¡å—" class="headerlink" title="å®‰è£…ç›¸åº”çš„åº“åŒ…å’Œpythonæ¨¡å—"></a>å®‰è£…ç›¸åº”çš„åº“åŒ…å’Œpythonæ¨¡å—</h4><p>å®‰è£…phantomjså’Œpyechartsï¼Œç”¨åˆ°äº†pythonçš„jiebaåˆ†è¯æ¨¡å—å’Œwordcloudè¯äº‘ç»˜åˆ¶æ¨¡å—ã€‚</p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">fc=<span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-keyword">for</span> text <span class="hljs-keyword">in</span> spm_msg:<br>    clean_msg(text) <span class="hljs-comment">#æ¸…æ´—æ–‡æœ¬ä¸­çš„ç‰¹æ®Šå­—ç¬¦ã€æ— æ„ä¹‰å­—ç¬¦å’Œè¿ç»­ç©ºæ ¼ç­‰</span><br>    txt +=text<br>words=jieba.lcut(fc)<span class="hljs-comment">#åˆ†è¯</span><br>article=<span class="hljs-string">&#x27; &#x27;</span>.join(words)<br><br>c = wordcloud.WordCloud( \<br>    width = <span class="hljs-number">1000</span>, height = <span class="hljs-number">700</span>, \ <br>    background_color = <span class="hljs-string">&quot;white&quot;</span>, \<br>    font_path = <span class="hljs-string">&quot;drive/MyDrive/STHeiti Medium.ttc&quot;</span>    <br>    )<br>c.generate(article)<br><br>c.to_file(<span class="hljs-string">&#x27;è¯äº‘å›¾.png&#x27;</span>)<br></code></pre></td></tr></table></figure><p>æ¢ç´¢spammerså‘é€çš„messageå¤§è‡´å†…å®¹ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œspammersä¸ªäººä¸»é¡µæ¶ˆæ¯çš„ä¸€äº›å…³é”®è¯åŒ…æ‹¬â€œå¾®ä¿¡â€ã€â€œæ—…æ¸¸â€ã€â€œä»£ç†â€ã€â€œæ—¶å°šâ€œç­‰ç­‰ã€‚</p><img src="è¯äº‘å›¾-6.png" alt="è¯äº‘å›¾-6" style="zoom:75%;" />]]></content>
    
    
    
    <tags>
      
      <tag>flink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>test music</title>
    <link href="/2021/11/10/test-music/"/>
    <url>/2021/11/10/test-music/</url>
    
    <content type="html"><![CDATA[<h2 id="ç½‘æ˜“äº‘"><a href="#ç½‘æ˜“äº‘" class="headerlink" title="ç½‘æ˜“äº‘"></a>ç½‘æ˜“äº‘</h2>    <div id="aplayer-VHWXzVfQ" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="31370984" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#6F42C1"    ></div><h2 id="QQ"><a href="#QQ" class="headerlink" title="QQ"></a>QQ</h2>    <div id="aplayer-uXhWFpWS" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="002S80690qXeFR" data-server="tencent" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#D9534F"    ></div>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘çš„è‡ªåŠ¨æ‰“å¡ç¨‹åº</title>
    <link href="/2021/11/05/daka/"/>
    <url>/2021/11/05/daka/</url>
    
    <content type="html"><![CDATA[<h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡:"></a>ç›®æ ‡:</h2><p>å®Œæˆå­¦æ ¡çš„æ¯æ—¥å¥åº·æ‰“å¡ä»»åŠ¡</p><h2 id="æ‰“å¡æµç¨‹"><a href="#æ‰“å¡æµç¨‹" class="headerlink" title="æ‰“å¡æµç¨‹:"></a>æ‰“å¡æµç¨‹:</h2><p>æ¯å¤©æ—©ä¸Šå…«ç‚¹æ‰“å¼€æµè§ˆå™¨ã€æ‰“å¼€å­¦å·¥ç½‘ã€ç™»é™†è´¦å·ã€ç‚¹è¿›æ‰“å¡é¡µé¢ã€é€‰æ‹©ç¡®è®¤ã€ä¿å­˜è¡¨å•ã€ç¡®è®¤æ‰“å¡æˆåŠŸã€‚</p><hr><h2 id="1-é…ç½®äº‘æœåŠ¡å™¨"><a href="#1-é…ç½®äº‘æœåŠ¡å™¨" class="headerlink" title="1. é…ç½®äº‘æœåŠ¡å™¨"></a>1. é…ç½®äº‘æœåŠ¡å™¨</h2><p>CentOS 7.6 64bit</p><h2 id="2-ç¼–å†™pythonç¨‹åº"><a href="#2-ç¼–å†™pythonç¨‹åº" class="headerlink" title="2. ç¼–å†™pythonç¨‹åº"></a>2. ç¼–å†™pythonç¨‹åº</h2><h3 id="æ¨¡å—å®‰è£…"><a href="#æ¨¡å—å®‰è£…" class="headerlink" title="æ¨¡å—å®‰è£…"></a>æ¨¡å—å®‰è£…</h3><ul><li><p>å®‰è£…playwrightæ¨¡å—</p><p>Playwright æ˜¯å¾®è½¯å¼€æºçš„ä¸€ä¸ªåŸºäº Node.js çš„å·¥å…·åº“ï¼Œå¯ä½¿ç”¨ä¸€ä¸ªç›¸åŒçš„APIè°ƒç”¨Chromiumï¼ˆGoogle-Chromeã€Microsoft-Edgeï¼‰ã€WebKitï¼ˆApple-Safariï¼‰å’ŒMozilla-Firefoxæµè§ˆå™¨è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">pip install playwright -i https:<span class="hljs-regexp">//</span>pypi.douban.com/simple <br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…chromiumæµè§ˆå™¨</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">python -m playwright <span class="hljs-keyword">install</span> chromium<br></code></pre></td></tr></table></figure></li></ul><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>ä¸»è¦å°±æ˜¯è°ƒç”¨playwrightæ¨¡å—é‡Œçš„APIï¼Œå®Œæˆæ‰“å¼€ç½‘é¡µã€ç‚¹å‡»é¡µé¢å…ƒç´ å’Œè¾“å…¥ä¿¡æ¯çš„æ•´ä¸ªè¿‡ç¨‹ã€‚</p><ul><li><p>å‚è€ƒæ–‡æ¡£<br><a href="https://pypi.org/project/playwright/">pypiæ–‡æ¡£ï¼šPlaywright for Python</a><br><a href="https://playwright.dev/docs/api/class-page">playwright APIæ–‡æ¡£</a></p></li><li><p>æ‰“å¼€æµè§ˆå™¨å¹¶åˆ›å»ºpageå¯¹è±¡</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">browser</span> = playwright.chromium.launch(headless=<span class="hljs-literal">True</span>)<br><span class="hljs-attr">context</span> = browser.new_context()<br><span class="hljs-attr">page</span> = context.new_page()<br></code></pre></td></tr></table></figure></li><li><p>ç”¨åˆ°çš„å‡½æ•°åŠŸèƒ½ï¼š</p><ul><li><p>å»åˆ°æŸä¸ªç½‘å€ï¼š<code>page.goto()</code></p></li><li><p>ç‚¹å‡»æŸä¸ªå…ƒç´ ï¼š<code>page.click()</code>ï¼Œæ‹¬å·é‡Œå†…å®¹æ˜¯å¦‚ä½•å®šä½åˆ°è¯¥å…ƒç´ ï¼Œå…·ä½“éœ€è¦çœ‹ç½‘é¡µæºç ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£<a href="https://playwright.dev/docs/selectors">Playwrightå…ƒç´ é€‰æ‹©å™¨Selector</a></p></li><li><p>å¡«å†™æ–‡æœ¬æ¡†ï¼ˆç”¨æˆ·åã€å¯†ç ç­‰ï¼‰ï¼š<code>page.fill()</code>ï¼Œç”¨æ³•ï¼š<code>page.fill(selector, value)</code>ï¼›<a href="https://playwright.dev/docs/api/class-page#page-fill">å®˜æ–¹æ–‡æ¡£page.fill( )</a></p></li><li><p>åœ¨å¼¹å‡ºçš„æ–°é¡µé¢ä¸­ç»§ç»­æ“ä½œï¼š<code>page.expect_popup()</code>å‡½æ•°ï¼Œä¼šè¿”å›ä¸€ä¸ª<a href="https://docs.python.org/3/reference/datamodel.html#context-managers" title="Event context manager">EventContextManager</a>å¯¹è±¡ï¼Œå–å®ƒçš„valueå°±æ˜¯ä¸€ä¸ªæ–°çš„pageå¯¹è±¡ï¼ˆ<code>new_page = page.expect_popup().value</code>ï¼‰ï¼Œåç»­åŒä¸Š</p></li></ul></li></ul><h2 id="3-è®¾ç½®å®šæ—¶ä»»åŠ¡æ‰§è¡Œç¨‹åº"><a href="#3-è®¾ç½®å®šæ—¶ä»»åŠ¡æ‰§è¡Œç¨‹åº" class="headerlink" title="3. è®¾ç½®å®šæ—¶ä»»åŠ¡æ‰§è¡Œç¨‹åº"></a>3. è®¾ç½®å®šæ—¶ä»»åŠ¡æ‰§è¡Œç¨‹åº</h2><ul><li><p>linuxç³»ç»Ÿ: <code>crontab -e</code>æ‰“å¼€å’Œç¼–è¾‘crondå®šæ—¶ä»»åŠ¡åˆ—è¡¨</p><p>ğŸ”—<a href="https://linuxhandbook.com/crontab/">å­¦ä¹ Linuxä¸­crontabçš„æ¦‚å¿µã€‚äº†è§£å¦‚ä½•è®¾ç½®cronä½œä¸šï¼Œä»¥ä¾¿åœ¨é¢„å®šä¹‰çš„æ—¶é—´è‡ªåŠ¨è¿è¡Œè„šæœ¬å’Œå‘½ä»¤</a></p></li><li><p>macosç³»ç»Ÿç±»ä¼¼linuxï¼Œwindowsç³»ç»Ÿæœ‰ä¸€ä¸ªä»»åŠ¡è®¡åˆ’ç¨‹åº</p></li></ul><h2 id="å‡ºç°çš„ç¯å¢ƒé…ç½®é—®é¢˜"><a href="#å‡ºç°çš„ç¯å¢ƒé…ç½®é—®é¢˜" class="headerlink" title="å‡ºç°çš„ç¯å¢ƒé…ç½®é—®é¢˜"></a>å‡ºç°çš„ç¯å¢ƒé…ç½®é—®é¢˜</h2><h5 id="1-æ£€æŸ¥pythonæ–‡ä»¶æ˜¯å¦æœ‰å¼€å¯å¯æ‰§è¡Œæƒé™"><a href="#1-æ£€æŸ¥pythonæ–‡ä»¶æ˜¯å¦æœ‰å¼€å¯å¯æ‰§è¡Œæƒé™" class="headerlink" title="1. æ£€æŸ¥pythonæ–‡ä»¶æ˜¯å¦æœ‰å¼€å¯å¯æ‰§è¡Œæƒé™"></a>1. æ£€æŸ¥pythonæ–‡ä»¶æ˜¯å¦æœ‰å¼€å¯å¯æ‰§è¡Œæƒé™</h5><h5 id="2-pythonç‰ˆæœ¬çš„é—®é¢˜"><a href="#2-pythonç‰ˆæœ¬çš„é—®é¢˜" class="headerlink" title="2. pythonç‰ˆæœ¬çš„é—®é¢˜"></a>2. <strong>python</strong>ç‰ˆæœ¬çš„é—®é¢˜</h5><ul><li><p><strong>æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„ç‰ˆæœ¬ï¼š</strong></p><p> playwrightè¦æ±‚æœ‰python3.7ä»¥ä¸Šç‰ˆæœ¬ï¼Œæ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å®‰è£…äº†è¿™ä¸ªç‰ˆæœ¬ä»¥ä¸Šçš„pythonï¼Œå†ç”¨å¯¹åº”ç‰ˆæœ¬çš„pipå®‰è£…playwright</p></li><li><p><strong>ç³»ç»Ÿå­˜åœ¨å¤šä¸ªç‰ˆæœ¬ï¼Œæ£€æŸ¥crondæ‰§è¡Œä»»åŠ¡æ—¶è°ƒç”¨çš„æ˜¯å¦æ˜¯æ»¡è¶³æ¡ä»¶çš„ç‰ˆæœ¬ï¼š</strong></p><p>å‡ºé”™æƒ…å†µï¼š<br>å‘½ä»¤è¡Œæµ‹è¯•æˆåŠŸï¼Œä½†crondæ‰§è¡Œå¤±è´¥ï¼šcrondæ‰§è¡Œä»»åŠ¡çš„èº«ä»½æ˜¯rootï¼Œé€šå¸¸linuxä¸‹rootçš„é»˜è®¤pythonè§£é‡Šå™¨æ˜¯python2.7ï¼Œè€Œè¿™ä¸ªç‰ˆæœ¬ä¸‹æ²¡æœ‰å®‰è£…playwrightï¼Œå¯¼è‡´æŠ¥é”™æ‰¾ä¸åˆ°æ¨¡å—ï¼›</p><p>æŸ¥çœ‹pythonç‰ˆæœ¬å’Œè°ƒç”¨æƒé™æƒ…å†µï¼š<code>ls -l | grep python</code></p></li></ul><h5 id="3-è§£å†³åŠæ³•å‚è€ƒ"><a href="#3-è§£å†³åŠæ³•å‚è€ƒ" class="headerlink" title="3. è§£å†³åŠæ³•å‚è€ƒ"></a>3. <strong>è§£å†³åŠæ³•å‚è€ƒ</strong></h5><ul><li><p>ç›´æ¥ä¿®æ”¹rooté»˜è®¤ç‰ˆæœ¬ï¼ˆä¸å»ºè®®ï¼‰</p></li><li><p>ç»™æ–°ç‰ˆæœ¬çš„pythonè§£é‡Šå™¨åŠ ä¸€ä¸ªè½¯é“¾æ¥åˆ°/usr/binç›®å½•ä¸‹ï¼Œä¾‹å¦‚ç”±condaå®‰è£…çš„python3.9ï¼š</p><p> <code>ln -s /root/miniconda3/bin/python /usr/bin/python39</code></p><p> ç„¶ååœ¨crondå®šæ—¶ä»»åŠ¡é‡Œè°ƒç”¨python39è§£é‡Šå™¨ï¼š</p><p> <code>0 8 * * * python39 [æ‰“å¡ç¨‹åº] </code></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Coding</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Web</tag>
      
      <tag>Python</tag>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/11/05/hello-world/"/>
    <url>/2021/11/05/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
